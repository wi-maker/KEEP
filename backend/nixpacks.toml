[phases.setup]
# Install System Dependencies (Python + Tesseract for OCR)
nixPkgs = ["python311", "tesseract", "gcc", "zlib", "poppler_utils"]

[phases.install]
# We are already in 'backend', so we just point to requirements.txt directly
cmds = ["python -m venv .venv && . .venv/bin/activate && pip install -r requirements.txt"]

[start]
# We are already in 'backend', so just start uvicorn directly
# We use 'python -m uvicorn' to avoid "command not found" errors
cmd = ". .venv/bin/activate && python -m uvicorn main:app --host 0.0.0.0 --port $PORT"